# GtkIMContext
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L6)</span>

#GtkIMContext defines the interface for GTK+ input methods. An input method
is used by GTK+ text input widgets like #GtkEntry to map from key events to
Unicode character strings.

The default input method can be set programmatically via the
#GtkSettings:gtk-im-module GtkSettings property. Alternatively, you may set
the GTK_IM_MODULE environment variable as documented in
[Running GTK+ Applications][gtk-running].

The #GtkEntry #GtkEntry:im-module and #GtkTextView #GtkTextView:im-module
properties may also be used to set input methods for specific widget
instances. For instance, a certain entry widget might be expected to contain
certain characters which would be easier to input with a certain input
method.

An input method may consume multiple key events in sequence and finally
output the composed result. This is called preediting, and an input method
may provide feedback about this process by displaying the intermediate
composition states as preedit text. For instance, the default GTK+ input
method implements the input of arbitrary Unicode code points by holding down
the Control and Shift keys and then typing “U” followed by the hexadecimal
digits of the code point.  When releasing the Control and Shift keys,
preediting ends and the character is inserted as text. Ctrl+Shift+u20AC for
example results in the € sign.

Additional input methods can be made available for use by GTK+ widgets as
loadable modules. An input method module is a small shared library which
implements a subclass of #GtkIMContext or #GtkIMContextSimple and exports
these four functions:

|[<!-- language="C" -->
void im_module_init(GTypeModule *module);
]|
This function should register the #GType of the #GtkIMContext subclass which
implements the input method by means of g_type_module_register_type(). Note
that g_type_register_static() cannot be used as the type needs to be
registered dynamically.

|[<!-- language="C" -->
void im_module_exit(void);
]|
Here goes any cleanup code your input method might require on module unload.

|[<!-- language="C" -->
void im_module_list(const GtkIMContextInfo ***contexts, int *n_contexts)
{
  *contexts = info_list;
  *n_contexts = G_N_ELEMENTS (info_list);
}
]|
This function returns the list of input methods provided by the module. The
example implementation above shows a common solution and simply returns a
pointer to statically defined array of #GtkIMContextInfo items for each
provided input method.

|[<!-- language="C" -->
GtkIMContext * im_module_create(const gchar *context_id);
]|
This function should return a pointer to a newly created instance of the
#GtkIMContext subclass identified by @context_id. The context ID is the same
as specified in the #GtkIMContextInfo array returned by im_module_list().

After a new loadable input method module has been installed on the system,
the configuration file `gtk.immodules` needs to be
regenerated by [gtk-query-immodules-3.0][gtk-query-immodules-3.0],
in order for the new input method to become available to GTK+ applications.


```pony
class val GtkIMContext is
  GtkWidget ref
```

#### Implements

* [GtkWidget](gtk3-GtkWidget.md) ref

---

## Constructors

### create_from_GtkBuilder
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L79)</span>


```pony
new val create_from_GtkBuilder(
  gtkbuilder: GtkBuilder val,
  glade_id: String val)
: GtkIMContext val^
```
#### Parameters

*   gtkbuilder: [GtkBuilder](gtk3-GtkBuilder.md) val
*   glade_id: [String](builtin-String.md) val

#### Returns

* [GtkIMContext](gtk3-GtkIMContext.md) val^

---

### create_from_GObjectREF
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L82)</span>


```pony
new val create_from_GObjectREF(
  widget': GObjectREF val)
: GtkIMContext val^
```
#### Parameters

*   widget': [GObjectREF](minimal-browser-..-gobject-GObjectREF.md) val

#### Returns

* [GtkIMContext](gtk3-GtkIMContext.md) val^

---

### never_call_this_constructor_or_else_tm
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L85)</span>


```pony
new val never_call_this_constructor_or_else_tm()
: GtkIMContext val^
```

#### Returns

* [GtkIMContext](gtk3-GtkIMContext.md) val^

---

## Public fields

### var widget: [GObjectREF](minimal-browser-..-gobject-GObjectREF.md) val
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L75)</span>



---

## Public Functions

### gtkwidget
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L77)</span>


```pony
fun box gtkwidget()
: GObjectREF val
```

#### Returns

* [GObjectREF](minimal-browser-..-gobject-GObjectREF.md) val

---

### delete_surrounding
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L91)</span>


Asks the widget that the input context is attached to to delete
characters around the cursor position by emitting the
GtkIMContext::delete_surrounding signal. Note that @offset and @n_chars
are in characters not in bytes which differs from the usage other
places in #GtkIMContext.

In order to use this function, you should first call
gtk_im_context_get_surrounding() to get the current context, and
call this function immediately afterwards to make sure that you
know what you are deleting. You should also account for the fact
that even if the signal was handled, the input context might not
have deleted all the characters that were requested to be deleted.

This function is used by an input method that wants to make
subsitutions in the existing text in response to new input. It is
not useful for applications.


```pony
fun box delete_surrounding(
  offset_pony: I32 val,
  n_chars_pony: I32 val)
: Bool val
```
#### Parameters

*   offset_pony: [I32](builtin-I32.md) val
*   n_chars_pony: [I32](builtin-I32.md) val

#### Returns

* [Bool](builtin-Bool.md) val

---

### focus_in
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L116)</span>


Notify the input method that the widget to which this
input context corresponds has gained focus. The input method
may, for example, change the displayed feedback to reflect
this change.


```pony
fun box focus_in()
: None val
```

#### Returns

* [None](builtin-None.md) val

---

### focus_out
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L125)</span>


Notify the input method that the widget to which this
input context corresponds has lost focus. The input method
may, for example, change the displayed feedback or reset the contexts
state to reflect this change.


```pony
fun box focus_out()
: None val
```

#### Returns

* [None](builtin-None.md) val

---

### reset
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L145)</span>


Notify the input method that a change such as a change in cursor
position has been made. This will typically cause the input
method to clear the preedit state.


```pony
fun box reset()
: None val
```

#### Returns

* [None](builtin-None.md) val

---

### set_use_preedit
<span class="source-link">[[Source]](src/gtk3/GtkIMContext.md#L165)</span>


Sets whether the IM context should use the preedit string
to display feedback. If @use_preedit is FALSE (default
is TRUE), then the IM context may use some other method to display
feedback, such as displaying it in a child of the root window.


```pony
fun box set_use_preedit(
  use_preedit_pony: Bool val)
: None val
```
#### Parameters

*   use_preedit_pony: [Bool](builtin-Bool.md) val

#### Returns

* [None](builtin-None.md) val

---

### show_all
<span class="source-link">[[Source]](src/gtk3/GtkWidget.md#L4)</span>


```pony
fun box show_all()
: None val
```

#### Returns

* [None](builtin-None.md) val

---

### destroy
<span class="source-link">[[Source]](src/gtk3/GtkWidget.md#L7)</span>


```pony
fun box destroy()
: None val
```

#### Returns

* [None](builtin-None.md) val

---

### signal_connect\[V: [Any](builtin-Any.md) #share\]
<span class="source-link">[[Source]](src/gtk3/GtkWidget.md#L10)</span>


```pony
fun box signal_connect[V: Any #share](
  detailed_signal: String val,
  c_handler: @{(GObjectREF, V)}[V] val,
  data: V)
: U64 val
```
#### Parameters

*   detailed_signal: [String](builtin-String.md) val
*   c_handler: @{(GObjectREF, V)}[V] val
*   data: V

#### Returns

* [U64](builtin-U64.md) val

---

